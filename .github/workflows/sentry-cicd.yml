name: ðŸš€ Sentry Release

on:
  push:
    branches: [main, dev]

jobs:
  sentry-release:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Sentry Release
        uses: getsentry/action-release@v1
        env:
          SENTRY_AUTH_TOKEN: ${{ secrets.SENTRY_AUTH_TOKEN }}
          SENTRY_ORG: pawpong
          SENTRY_PROJECT: javascript-nextjs
        with:
          environment: ${{ github.ref_name == 'main' && 'production' || 'staging' }}
          version: ${{ github.ref_name == 'main' && 'production' || 'staging' }}-${{ github.sha }}
